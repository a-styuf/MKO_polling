# класс для разбора подпрограмм для создания циклограмм
# циклограмма согласно данному шаблону
# ["Name", [[Address, Subaddress, Wr/R, [Data], Data leng, Start time, Finish time, Interval, Delay], [...], [...]]]
#    |          |          |        |      |         |          |           |          |         |
#    |          |          |        |      |         |          |           |          |         -- Задержка отправки
#    |          |          |        |      |         |          |           |          --- Интервал отправки, c
#    |          |          |        |      |         |          |           - Время остановки посылок, c
#    |          |          |        |      |         |          --- Время старта отправки от запуска программы, c
#    |          |          |        |      |         --- Длина данных для приема/отправки
#    |          |          |        |      ------------- Данные для отправки (при приеме не имеет значения)
#    |          |          |        -------------------- Отправка - "0", Прием - "1"
#    |          |          ----------------------------- Подадрес
#    |          ---------------------------------------- Адрес ОУ
#    --------------------------------------------------- Имя циклограммы

test_bakv_system = ["Общий тест БАКВ", [
    # Инициализация КВВ
    [29, 17, 0, [0x0002, 0x0000, 0x0000, 0x0000], 4, 2, 4, 0.0, 0.0],

    # Установка времени
    [29, 17, 0, [0x0001, 0x0000, 0x003C, 0x0000], 4, 10, 0, 0.0, 0.0],

    # Системный интервал 1 с
    [29, 17, 0, [0x0003, 0x0000, 0x0002, 0x0000], 4, 18, 22, 0.0, 0.0],
    # Измерительный интервал 20 с
    [29, 17, 0, [0x0003, 0x0001, 0x0014, 0x0000], 4, 18, 22, 0.0, 0.2],
    # Интервал событий 10 с
    [29, 17, 0, [0x0003, 0x0002, 0x000A, 0x0000], 4, 18, 22, 0.0, 0.4],
    # Интервал По ВШ 1 с
    [29, 17, 0, [0x0003, 0x0004, 0x0001, 0x0000], 4, 18, 22, 0.0, 0.6],

    # Системный кадр
    [29, 1, 1, [0], 32, 19, 86400, 2, 0.0],

    # Кадры ДВ с фоновым шумом
    [29, 2, 1, [], 32, 20, 86400, 20.0, 0.0],
    [29, 2, 1, [], 32, 20, 86400, 20.0, 0.2],
    [29, 2, 1, [], 32, 20, 86400, 20.0, 0.4],
    [29, 3, 1, [], 32, 20, 86400, 20.0, 0.6],
    [29, 3, 1, [], 32, 20, 86400, 20.0, 0.8],
    [29, 3, 1, [], 32, 20, 86400, 20.0, 1.0],
    [29, 4, 1, [], 32, 20, 86400, 20.0, 1.2],
    [29, 4, 1, [], 32, 20, 86400, 20.0, 1.4],
    [29, 4, 1, [], 32, 20, 86400, 20.0, 1.6],
    [29, 5, 1, [], 32, 20, 86400, 20.0, 1.8],
    [29, 5, 1, [], 32, 20, 86400, 20.0, 2.0],
    [29, 5, 1, [], 32, 20, 86400, 20.0, 2.2],

    # Включение режима контроля
    [29, 17, 0, [0x0005, 0x0001, 0x0000, 0x0000], 4, 60, 86400, 300.0, 0.0],

    # Включение воздействия на всех ДВ: период 220 мкс (1 с), количество 5
    [29, 17, 0, [0x000C, 0x0000, 220, 5], 4, 70, 86400, 300.0, 0.0],
    [29, 17, 0, [0x000C, 0x0001, 220, 5], 4, 70, 86400, 300.0, 2.0],
    [29, 17, 0, [0x000C, 0x0002, 220, 5], 4, 70, 86400, 300.0, 4.0],
    [29, 17, 0, [0x000C, 0x0003, 220, 5], 4, 70, 86400, 300.0, 6.0],

    # Сброс флагов событий
    [29, 17, 0, [0x0006, 0x0000, 0x0000, 0x0000], 4, 80, 86400, 300.0, 0.0],

    # Включение режима измерения
    [29, 17, 0, [0x0005, 0x0000, 0x0000, 0x0000], 4, 350, 86400, 300.0, 0.0],

    # Чтение ЗУ ЦМ
    [29, 18, 0, [0xABBA, 0xACDC, 0x0000, 0x0000], 4, 250, 86400, 10, 0.0],
    [29, 20, 1, [0], 32, 250, 86400, 10, 0.25]

]]



fast_test = ["Быстрый тест БА КВ", [
    # Инициализация КВВ
    [29, 17, 0, [0x0002, 0x0000, 0x0000, 0x0000], 4, 0, 0, 0.0, 0.0],
    # Установка времени
    [29, 17, 0, [0x0001, 0x0000, 0x0000, 0x003C], 4, 0, 0, 0.0, 15.0],
    # Включение режима контроля
    [29, 17, 0, [0x0005, 0x0001, 0x0000, 0x0000], 4, 0, 0, 0.0, 15.0],
    # Установка интервалов генерации кадров
    [29, 17, 0, [0x0003, 0x0001, 0x0000, 0x0015], 4, 15, 15, 0.0, 0.1],
    [29, 17, 0, [0x0003, 0x0002, 0x0000, 0x000A], 4, 15, 15, 0.0, 0.2],
    [29, 17, 0, [0x0003, 0x0003, 0x0000, 0x000A], 4, 15, 15, 0.0, 0.3],
    # Чтение оперативных данных
    [29, 1, 1, [], 32, 16, 300, 5.0, 0.0],
    [29, 2, 1, [], 32, 16, 300, 5.0, 0.1],
    [29, 2, 1, [], 32, 16, 300, 5.0, 0.2],
    [29, 2, 1, [], 32, 16, 300, 5.0, 0.3],
    [29, 3, 1, [], 32, 16, 300, 5.0, 0.4],
    [29, 3, 1, [], 32, 16, 300, 5.0, 0.5],
    [29, 3, 1, [], 32, 16, 300, 5.0, 0.6],
    [29, 4, 1, [], 32, 16, 300, 5.0, 0.7],
    [29, 4, 1, [], 32, 16, 300, 5.0, 0.8],
    [29, 4, 1, [], 32, 16, 300, 5.0, 0.9],
    [29, 5, 1, [], 32, 16, 300, 5.0, 1.0],
    [29, 5, 1, [], 32, 16, 300, 5.0, 1.1],
    [29, 5, 1, [], 32, 16, 300, 5.0, 1.2],
    # Включение воздействия на всех ДВ: период 10000 мкс (1 с), количество 100
    [29, 17, 0, [0x000C, 0x0000, 10000, 100], 4, 15, 42, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0001, 20000, 50], 4, 20, 52, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0002, 15000, 66], 4, 25, 62, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0003, 5000, 200], 4, 30, 72, 0.0, 0.0],
    # Чтение ЗУ ЦМ
    [29, 18, 0, [0xABBA, 0xACDC, 0x0000, 0x0000], 4, 300, 600, 0.2, 0.0],
    [29, 20, 1, [0], 32, 300, 600, 0.2, 0.1],
]]

test_bakv_single_dv_impact_test = ["Проверка прохождения команд", [
    # Инициализация КВВ
    [29, 17, 0, [0x0002, 0x0000, 0x0000, 0x0000], 4, 0, 0, 0.0, 0.0],
    # Измерительный интервал 20 с
    [29, 17, 0, [0x0003, 0x0001, 0x0014, 0x0000], 4, 18, 18, 0.0, 0.0],
    # Включение воздействия на всех ДВ: период 220 мкс (1 с), количество 5
    [29, 17, 0, [0x000C, 0x0000, 220, 5], 4, 20, 3600, 2.0, 0.0],
    [29, 17, 0, [0x000C, 0x0001, 220, 7], 4, 20, 3600, 2.0, 0.5],
    [29, 17, 0, [0x000C, 0x0002, 220, 9], 4, 20, 3600, 2.0, 1.0],
    [29, 17, 0, [0x000C, 0x0003, 220, 11], 4, 20, 3600, 2.0, 1.5],
    # Кадры ДВ с фоновым шумом
    [29, 2, 1, [], 32, 20, 3600, 5.0, 0.0],
    [29, 2, 1, [], 32, 20, 3600, 5.0, 0.2],
    [29, 2, 1, [], 32, 20, 3600, 5.0, 0.4],
    [29, 2, 1, [], 32, 20, 3600, 5.0, 0.6],
    [29, 3, 1, [], 32, 20, 3600, 5.0, 0.8],
    [29, 3, 1, [], 32, 20, 3600, 5.0, 1.0],
    [29, 3, 1, [], 32, 20, 3600, 5.0, 1.2],
    [29, 3, 1, [], 32, 20, 3600, 5.0, 1.4],
    [29, 4, 1, [], 32, 20, 3600, 5.0, 1.6],
    [29, 4, 1, [], 32, 20, 3600, 5.0, 1.8],
    [29, 4, 1, [], 32, 20, 3600, 5.0, 2.0],
    [29, 4, 1, [], 32, 20, 3600, 5.0, 2.2],
    [29, 5, 1, [], 32, 20, 3600, 5.0, 2.4],
    [29, 5, 1, [], 32, 20, 3600, 5.0, 2.6],
    [29, 5, 1, [], 32, 20, 3600, 5.0, 2.8],
    [29, 5, 1, [], 32, 20, 3600, 5.0, 3.0],
    # Системный кадр
    [29, 1, 1, [0], 32, 20, 3600, 1, 0.0],
]]