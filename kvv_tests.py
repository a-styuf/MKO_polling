# класс для разбора подпрограмм для создания циклограмм
# циклограмма согласно данному шаблону
# ["Name", [[Address, Subaddress, Wr/R, [Data], Data leng, Start time, Finish time, Interval, Delay], [...], [...]]]
#    |          |          |        |      |         |          |           |          |         |
#    |          |          |        |      |         |          |           |          |         -- Задержка отправки
#    |          |          |        |      |         |          |           |          --- Интервал отправки, c
#    |          |          |        |      |         |          |           - Время остановки посылок, c
#    |          |          |        |      |         |          --- Время старта отправки от запуска программы, c
#    |          |          |        |      |         --- Длина данных для приема/отправки
#    |          |          |        |      ------------- Данные для отправки (при приеме не имеет значения)
#    |          |          |        -------------------- Отправка - "0", Прием - "1"
#    |          |          ----------------------------- Подадрес
#    |          ---------------------------------------- Адрес ОУ
#    --------------------------------------------------- Имя циклограммы

fast_test = ["Быстрый тест КВВ", [
    # Инициализация КВВ
    [29, 17, 0, [0x0002, 0x0000, 0x0000, 0x0000], 4, 0, 0, 0.0, 0.0],
    # Установка времени
    [29, 17, 0, [0x0001, 0x0000, 0x0000, 0x003C], 4, 0, 0, 0.0, 15.0],

    # Включение режима контроля
    [29, 17, 0, [0x0005, 0x0001, 0x0000, 0x0000], 4, 0, 0, 0.0, 15.0],
    # Установка интервалов генерации кадров
    [29, 17, 0, [0x0003, 0x0000, 0x0000, 0x000A], 4, 15, 15, 0.0, 0.0],
    [29, 17, 0, [0x0003, 0x0001, 0x0000, 0x0015], 4, 15, 15, 0.0, 0.1],
    [29, 17, 0, [0x0003, 0x0002, 0x0000, 0x000A], 4, 15, 15, 0.0, 0.2],
    [29, 17, 0, [0x0003, 0x0003, 0x0000, 0x000A], 4, 15, 15, 0.0, 0.3],
    # Чтение оперативных данных
    [29, 1, 1, [], 32, 16, 300, 5.0, 0.0],
    [29, 2, 1, [], 32, 16, 300, 5.0, 0.1],
    [29, 3, 1, [], 32, 16, 300, 5.0, 0.2],
    [29, 4, 1, [], 32, 16, 300, 5.0, 0.3],
    [29, 5, 1, [], 32, 16, 300, 5.0, 0.4],
    [29, 6, 1, [], 32, 16, 300, 5.0, 0.5],
    [29, 7, 1, [], 32, 16, 300, 5.0, 0.6],
    [29, 8, 1, [], 32, 16, 300, 5.0, 0.7],
    [29, 9, 1, [], 32, 16, 300, 5.0, 0.8],
    [29, 10, 1, [], 32, 16, 300, 5.0, 0.9],
    [29, 11, 1, [], 32, 16, 300, 5.0, 1.0],
    [29, 12, 1, [], 32, 16, 300, 5.0, 1.2],
    [29, 13, 1, [], 32, 16, 300, 5.0, 1.3],
    # Включение воздействия на всех ДВ: период 10000 мкс (1 с), количество 100
    [29, 17, 0, [0x000C, 0x0000, 10000, 100], 4, 15, 42, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0001, 20000, 50], 4, 15, 52, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0002, 15000, 66], 4, 15, 62, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0003, 5000, 200], 4, 71, 72, 0.0, 0.0],
    # Чтение ЗУ ЦМ
    [29, 18, 0, [0xABBA, 0xACDC, 0x0000, 0x0000], 4, 300, 600, 0.2, 0.0],
    [29, 20, 1, [0], 32, 300, 600, 0.2, 0.1],
]]

music_test = ["Музыка", [
    # Инициализация КВВ
    [29, 17, 0, [0x0002, 0x0000, 0x0000, 0x0000], 4, 0, 0, 0.0, 0.0],
    # Установка времени
    [29, 17, 0, [0x0001, 0x0000, 0x0000, 0x003C], 4, 0, 0, 0.0, 15.0],

    # Включение режима контроля
    [29, 17, 0, [0x0005, 0x0001, 0x0000, 0x0000], 4, 0, 0, 0.0, 15.0],
    # Установка интервалов генерации кадров
    [29, 17, 0, [0x0003, 0x0000, 0x0000, 0x0001], 4, 15, 15, 0.0, 0.0],
    [29, 17, 0, [0x0003, 0x0001, 0x0000, 0x00A], 4, 15, 15, 0.0, 0.1],
    [29, 17, 0, [0x0003, 0x0002, 0x0000, 0x000A], 4, 15, 15, 0.0, 0.2],
    [29, 17, 0, [0x0003, 0x0003, 0x0000, 0x000A], 4, 15, 15, 0.0, 0.3],
    # Чтение оперативных данных
    [29, 1, 1, [], 32, 16, 60, 5.0, 0.0],
    [29, 2, 1, [], 32, 16, 60, 5.0, 0.1],
    [29, 3, 1, [], 32, 16, 60, 5.0, 0.2],
    [29, 4, 1, [], 32, 16, 60, 5.0, 0.3],
    [29, 5, 1, [], 32, 16, 60, 5.0, 0.4],
    [29, 6, 1, [], 32, 16, 60, 5.0, 0.5],
    [29, 7, 1, [], 32, 16, 60, 5.0, 0.6],
    [29, 8, 1, [], 32, 16, 60, 5.0, 0.7],
    [29, 9, 1, [], 32, 16, 60, 5.0, 0.8],
    [29, 10, 1, [], 32, 16, 60, 5.0, 0.9],
    [29, 11, 1, [], 32, 16, 60, 5.0, 1.0],
    [29, 12, 1, [], 32, 16, 60, 5.0, 1.2],
    [29, 13, 1, [], 32, 16, 60, 5.0, 1.3],
    # Включение воздействия на всех ДВ: период 10000 мкс (1 с), количество 100
    [29, 17, 0, [0x000C, 0x0000, 10000, 40], 4, 20, 20, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0001, 7500, 50], 4, 25, 25, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0002, 1000, 40], 4, 30, 30, 0.0, 0.0],
    [29, 17, 0, [0x000C, 0x0003, 5000, 80], 4, 35, 35, 0.0, 0.0],
    # Чтение ЗУ ЦМ
    [29, 18, 0, [0xABBA, 0xACDC, 0x0000, 0x0000], 4, 60, 600, 0.2, 0.0],
    [29, 20, 1, [0], 32, 60, 600, 0.2, 0.1],
]]

single_day_test = ["Суточный прогон КВВ", [
    # Инициализация КВВ
    [29, 17, 0, [0x0002, 0x0000, 0x0000, 0x0000], 4, 0, 0, 0.0, 0.0],

    #[29, 17, 0, [0x0009, 0x0000, 0x0001, 0x0000], 4, 0, 0, 0.0, 12.0],
    #[29, 17, 0, [0x0009, 0x0001, 0x0001, 0x0000], 4, 0, 0, 0.0, 12.2],
    #[29, 17, 0, [0x0009, 0x0002, 0x0001, 0x0000], 4, 0, 0, 0.0, 12.4],
    #[29, 17, 0, [0x0009, 0x0003, 0x0001, 0x0000], 4, 0, 0, 0.0, 12.6],
    # Установка времени
    [29, 17, 0, [0x0001, 0x0000, 0x0000, 0x003C], 4, 0, 0, 0.0, 15.0],
    # Включение режима контроля
    [29, 17, 0, [0x0005, 0x0001, 0x0000, 0x0000], 4, 0, 0, 0, 15.0],
    # Чтение оперативных данных
    [29, 1, 1, [], 32, 16, 259200, 5.0, 0.0],
    [29, 2, 1, [], 32, 16, 259200, 5.0, 0.1],
    [29, 3, 1, [], 32, 16, 259200, 5.0, 0.2],
    [29, 4, 1, [], 32, 16, 259200, 5.0, 0.3],

    [29, 5, 1, [], 32, 16, 259200, 5.0, 0.4],
    [29, 6, 1, [], 32, 16, 259200, 5.0, 0.5],
    [29, 7, 1, [], 32, 16, 259200, 5.0, 0.6],
    [29, 8, 1, [], 32, 16, 259200, 5.0, 0.7],
    [29, 9, 1, [], 32, 16, 259200, 5.0, 0.8],
    [29, 10, 1, [], 32, 16, 259200, 5.0, 0.9],
    [29, 11, 1, [], 32, 16, 259200, 5.0, 1.0],
    [29, 12, 1, [], 32, 16, 259200, 5.0, 1.2],
    [29, 13, 1, [], 32, 16, 259200, 5.0, 1.3],
    # Включение воздействия на всех ДВ: период 10000 мкс (1 с), количество 100
    [29, 17, 0, [0x000C, 0x0000, 220, 5], 4, 42, 259200, 300, 0.0],
    [29, 17, 0, [0x000C, 0x0001, 220, 5], 4, 52, 259200, 300, 0.0],
    [29, 17, 0, [0x000C, 0x0002, 220, 5], 4, 62, 259200, 300, 0.0],
    [29, 17, 0, [0x000C, 0x0003, 220, 5], 4, 72, 259200, 300, 0.0],
    # Сброс флагов событий
    [29, 17, 0, [0x0006, 0x0000, 0x0000, 0x0000], 4, 100, 259200, 300, 0.0],
    # Чтение ЗУ ЦМ
    [29, 18, 0, [0xABBA, 0xACDC, 0x0000, 0x0000], 4, 300, 259200, 0.5, 0.0],
    [29, 20, 1, [0], 32, 300, 86400, 0.5, 0.1],
]]

full_time = 7200

ib_test = ["Проверка внутренней шины", [
    # Инициализация КВВ
    [29, 17, 0, [0x0002, 0x0000, 0x0000, 0x0000], 4, 0, 0, 0.0, 0.0],

    #[29, 17, 0, [0x0009, 0x0000, 0x0001, 0x0000], 4, 0, 0, 0.0, 12.0],
    #[29, 17, 0, [0x0009, 0x0001, 0x0001, 0x0000], 4, 0, 0, 0.0, 12.2],
    #[29, 17, 0, [0x0009, 0x0002, 0x0001, 0x0000], 4, 0, 0, 0.0, 12.4],
    #[29, 17, 0, [0x0009, 0x0003, 0x0001, 0x0000], 4, 0, 0, 0.0, 12.6],
    # Установка времени
    [29, 17, 0, [0x0001, 0x0000, 0x0000, 0x003C], 4, 0, 0, 0.0, 15.0],
    # Включение режима контроля
    [29, 17, 0, [0x0005, 0x0001, 0x0000, 0x0000], 4, 0, 0, 0, 15.0],
    # Сброс флагов событий
    [29, 17, 0, [0x0006, 0x0000, 0x0000, 0x0000], 4, 20, full_time, 30, 0.0],
    # Включение воздействия на всех ДВ: период 10000 мкс (1 с), количество 100
    [29, 17, 0, [0x000C, 0x0000, 220, 5], 4, 20, full_time, 30, 5.2],
    [29, 17, 0, [0x000C, 0x0001, 220, 5], 4, 20, full_time, 30, 10.2],
    [29, 17, 0, [0x000C, 0x0002, 220, 5], 4, 20, full_time, 30, 15.2],
    [29, 17, 0, [0x000C, 0x0003, 220, 5], 4, 20, full_time, 30, 20.2],
    # Системный кадр
    [29, 1, 1, [0], 32, 15, full_time, 0.5, 0.35],
    # Чтение ЗУ ЦМ
    [29, 18, 0, [0xABBA, 0xACDC, 0x0000, 0x0000], 4, 25, full_time, 0.25, 0.0],
    [29, 20, 1, [0], 32, 25, full_time, 0.25, 0.1],
]]

dv_test = ["Прямой опрос DV", [
    [1, 16, 1, [], 6, 0, 3600, 5, 0.0],
]]
